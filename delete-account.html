<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Delete Account - inSTA</title>
    <meta name="description" content="Delete your inSTA account. We're sorry to see you go!">

    <link rel="stylesheet" href="css/main.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <a href="/">
                    <img src="https://motobeans.com/inSTA-logo.png" alt="inSTA Logo">
                </a>
            </div>
            <ul class="nav-menu">
                <li><a href="/">Home</a></li>
            </ul>
            <button class="download-btn">Download App</button>
        </div>
    </nav>

    <!-- Delete Account Content -->
    <div class="page-content">
        <div class="delete-account-container">
            <div class="delete-account-header">
                <h1>Delete Account</h1>
            </div>
            
            <div class="delete-account-content">
                <h2 class="sorry-title">We're Sorry to See You Go!</h2>
                <p class="delete-description">Your departure makes a dent to us; we value every member of our community.</p>
                <p class="delete-description">Remember, our community is always here for you, and you can come back anytime.</p>
                
                <form id="deleteAccountForm" class="delete-form">
                    <div class="form-group">
                        <label for="userName">Your Name <span class="required">*</span></label>
                        <input type="text" id="userName" name="userName" required placeholder="Enter your name">
                    </div>
                    
                    <div class="form-group">
                        <label for="mobileNumber">Mobile Number <span class="required">*</span></label>
                        <input type="tel" id="mobileNumber" name="mobileNumber" required placeholder="Enter your mobile number" pattern="[0-9]{10}">
                    </div>
                    
                    <button type="submit" class="submit-btn">Submit</button>
                </form>
                
                <div id="successMessage" class="success-message" style="display: none;">
                    <p>✓ Your request has been submitted successfully. We'll process it shortly.</p>
                </div>
                
                <div id="errorMessage" class="error-message" style="display: none;">
                    <p>✗ There was an error submitting your request. Please try again.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-info">
                <h3>inSTA – Indian Social Trusted Application</h3>
                <p>📍 Made in India, For India, By India.</p>
                <p>🌐 Connect. Share. Celebrate.</p>
                <div class="footer-buttons">
                    <button class="btn-outline">Download Now</button>
                </div>
            </div>
            <div>
                <h4 style="font-size: 1.3rem; margin-bottom: 1.5rem;">Quick Links</h4>
                <div class="footer-links">
                    <a href="privacy-policy">🛡️ Privacy Policy</a>
                    <a href="terms-conditions">📄 Terms & Conditions</a>
                    <a href="delete-account">🗑️ Delete Account</a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>© 2025 inSTA - Indian Social Trusted Application. All rights reserved.</p>
            <p style="margin-top: 0.5rem;">Made with ❤️ in India</p>
        </div>
    </footer>

    <script src="js/site.js"></script>
    <script>
        // Delete Account Form Handler
        document.getElementById('deleteAccountForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const userName = document.getElementById('userName').value;
            const mobileNumber = document.getElementById('mobileNumber').value;
            const submitBtn = document.querySelector('.submit-btn');
            const successMessage = document.getElementById('successMessage');
            const errorMessage = document.getElementById('errorMessage');
            
            // Disable button and show loading state
            submitBtn.disabled = true;
            submitBtn.textContent = 'Submitting...';
            
            // Hide previous messages
            successMessage.style.display = 'none';
            errorMessage.style.display = 'none';
            
            try {
                // Create form data for FormSubmit
                const formData = new FormData();
                formData.append('_subject', 'm-inSTA Delete Request');
                formData.append('_template', 'box');
                formData.append('_captcha', 'false');
                formData.append('Name', userName);
                formData.append('Mobile Number', mobileNumber);
                formData.append('Request Type', 'Account Deletion Request');
                formData.append('Submitted On', new Date().toLocaleString());
                
                // Send to both email addresses using FormSubmit
                // Primary: minstaasocial@gmail.com, CC: 26rakkesh@gmail.com
                const response = await fetch('https://formsubmit.co/ajax/minstaasocial@gmail.com', {
                    method: 'POST',
                    body: formData
                });
                
                const result = await response.json();
                
                if (response.ok && result.success) {
                    // Send to second email as well
                    const formData2 = new FormData();
                    formData2.append('_subject', 'm-inSTA Delete Request');
                    formData2.append('_template', 'box');
                    formData2.append('_captcha', 'false');
                    formData2.append('Name', userName);
                    formData2.append('Mobile Number', mobileNumber);
                    formData2.append('Request Type', 'Account Deletion Request');
                    formData2.append('Submitted On', new Date().toLocaleString());
                    
                    await fetch('https://formsubmit.co/ajax/26rakkesh@gmail.com', {
                        method: 'POST',
                        body: formData2
                    });
                    
                    // Show success message
                    successMessage.style.display = 'block';
                    
                    // Reset form
                    document.getElementById('deleteAccountForm').reset();
                    
                    // Hide success message after 5 seconds
                    setTimeout(() => {
                        successMessage.style.display = 'none';
                    }, 5000);
                } else {
                    throw new Error(result.message || 'Failed to submit form');
                }
            } catch (error) {
                console.error('Error:', error);
                errorMessage.querySelector('p').textContent = '✗ There was an error submitting your request. Please try again.';
                errorMessage.style.display = 'block';
                
                // Hide error message after 5 seconds
                setTimeout(() => {
                    errorMessage.style.display = 'none';
                }, 5000);
            } finally {
                // Re-enable button
                submitBtn.disabled = false;
                submitBtn.textContent = 'Submit';
            }
        });
        
        // Mobile number validation
        document.getElementById('mobileNumber').addEventListener('input', function(e) {
            this.value = this.value.replace(/[^0-9]/g, '');
            if (this.value.length > 10) {
                this.value = this.value.slice(0, 10);
            }
        });
    </script>
</body>
</html>
